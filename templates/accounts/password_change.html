{% extends 'accounts/base.html' %}
{% load static %}
{% block head_scripts %}
    <script>
        function validateResetPasswordForm() {
            var new_password = document.getElementById("new_password").value
            var confirm_password = document.getElementById("confirm_password").value
            if (new_password.trim() != "" && confirm_password.trim() != "" && new_password == confirm_password) {
                return true;
            } else {
                return false;
            }
        }
    </script>
{% endblock %}
{% block title %}Change Password{% endblock title %}
{% block content %}
    <body>
    <div class="account-pages my-5 pt-sm-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-8 col-lg-6 col-xl-5">
                    <div class="card overflow-hidden">
                        <div class="bg-primary bg-soft">
                            <div class="row">
                                <div class="col-7">
                                    <div class="text-primary p-4">
                                        <h5 class="text-primary">Change Password</h5>
                                        <p>Change Password with Studio</p>
                                    </div>
                                </div>
                                <div class="col-5 align-self-end">
                                    <img src="{% static 'images/profile-img.png' %}" alt="" class="img-fluid">
                                </div>
                            </div>
                        </div>
                        <div class="card-body pt-0">
                            <div class="auth-logo">
                                {#                                    <a href="{% url 'dashboard' %}" class="auth-logo-light">#}
                                {#                                        <div class="avatar-md profile-user-wid mb-4">#}
                                {#                                            <span class="avatar-title rounded-circle bg-light">#}
                                {#                                                <img src="{% static 'images/logo-light.svg' %}" alt="" class="rounded-circle" height="34">#}
                                {#                                            </span>#}
                                {#                                        </div>#}
                                {#                                    </a>#}

                                {#                                    <a href="{% url 'dashboard' %}" class="auth-logo-dark">#}
                                {#                                        <div class="avatar-md profile-user-wid mb-4">#}
                                {#                                            <span class="avatar-title rounded-circle bg-light">#}
                                {#                                                <img src="{% static 'images/logo.svg' %}" alt="" class="rounded-circle" height="34">#}
                                {#                                            </span>#}
                                {#                                        </div>#}
                                {#                                    </a>#}
                            </div>
                            <div class="p-2">

{#                                {% for message in messages %}#}
{#                                    <div class="alert {{ message.tags }} mb-4" role="alert">#}
{#                                        <strong>{{ message }}</strong>#}
{#                                    </div>#}
{#                                {% endfor %}#}
                                <form onsubmit="return validateResetPasswordForm()" method="post" action="">
                                    {% csrf_token %}
                                    <div class="m-2">
                                        <label for="email">Email</label>
                                        <input class="form-control" style="width: 100%" type="email"
                                               id="email"
                                               name="email"
                                               value="{{ email }}"
                                               readonly
                                        >
                                    </div>

                                    <div class="m-2">
                                        <label for="secret_token">Code</label>
                                        <input class="form-control" style="width: 100%" type="text"
                                               id="secret_token"
                                               name="secret_token"
                                               value="{{ secret_token }}"
                                               readonly
                                        >
                                    </div>

                                    <div class="m-2">
                                        <label for="new_password">Enter Your Password</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="bx bx-show"
                                                                              onclick="showHidePassword('new_password')"></i></span>
                                            <input class="form-control" type="password"
                                                   id="new_password"
                                                   name="new_password">
                                        </div>
                                    </div>
                                    <div class="m-2">
                                        <label for="confirm_password">Confirm Password</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="bx bx-show"
                                                                              onclick="showHidePassword('confirm_password')"></i></span>
                                            <input class="form-control" type="password"
                                                   id="confirm_password"
                                                   name="confirm_password">
                                        </div>
                                    </div>


                                    <div class="mt-3 d-grid">
                                        <button class="btn btn-primary waves-effect waves-light" type="submit">Change
                                            Password
                                        </button>
                                    </div>
                                </form>
                                <div class="col-lg-6">

                                    {% if messages %}
                                        {% for message in messages|slice:":1" %}

                                            <div class="modal fade show"
                                                 style="display: block ; background-color: rgba(0,0,0,.5)"
                                                 id="secondmodal"
                                                 aria-hidden="true" aria-labelledby="..." tabindex="-1">
                                                <div class="modal-dialog modal-dialog-centered">
                                                    <div class="modal-content p-4 text-center">
                                                        {% if message.tags == "error" %}

                                                            <div class="d-flex flex-column justify-content-center align-items-center">
                                                                <i class="mdi mdi-close-circle  text-danger m-0 p-0"
                                                                   style="font-size: 150px"></i>
                                                                <h2 class="fw-bold text-uppercase" style="margin-top: -20px">
                                                                    {{message.tags }}</h2>
                                                                <p class="fw-semibold mb-4">{{ message }}</p>
                                                                <button class="btn btn-primary w-75"
                                                                        onclick="hideModel()">Try
                                                                    Again
                                                                </button>
                                                            </div>
                                                        {% else %}
                                                            <div class="d-flex flex-column justify-content-center align-items-center">

                                                                <i class="mdi mdi-checkbox-marked-circle  text-success m-0"
                                                                   style="font-size: 150px"></i>
                                                                <h2 class="fw-bold " style="margin-top: -20px">
                                                                    Success</h2>
                                                                <p class="fw-semibold mb-4">{{ message }}</p>
                                                                <a href="/login">
                                                                    <button class="btn btn-primary w-75">
                                                                        Done
                                                                    </button>
                                                                </a>
                                                            </div>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>

                                        {% endfor %}
                                    {% endif %}
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="text-center">
                        <div>
                            <p>©
                                <script>document.write(new Date().getFullYear())</script>
                                Studio. Crafted with <i class="mdi mdi-heart text-danger"></i> <a
                                        href="https://fullmeasure.io/">Fullmeasure</a>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <!-- end account-pages -->
{% endblock content %}
{% block extra_javascript %}
    <script>
        function hideModel() {
            window.location.href = window.location.href
            document.getElementById('secondmodal').style.display = "none";

        }

        function showHidePassword(id) {
            var x = document.getElementById(id);
            if (x.type === "password") {
                x.type = "text";
            } else {
                x.type = "password";
            }
        }
    </script>
{% endblock %}